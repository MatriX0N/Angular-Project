<!-- –ü–æ—à—É–∫ -->
<div class="search-bar">
  <input
    type="text"
    placeholder="–©–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏?"
    [(ngModel)]="query"
    (keyup.enter)="onSearch()"
  />
  <button class="search-btn" (click)="onSearch()">
    <img src="assets/lupa.png" alt="–ª—É–ø–∞" />
  </button>
</div>

<div
  class="main-section"
  [style.padding-bottom.px]="currentTrack ? 120 : 0"
>

  <!-- üîç –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É -->
  <div class="search-results" *ngIf="searchResults.length > 0">
    <h2>üîé –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É</h2>
  
    <div class="search-list">
      <div class="search-item" *ngFor="let track of searchResults">
        <img [src]="track.artworkUrl100" alt="–û–±–∫–ª–∞–¥–∏–Ω–∫–∞" class="search-cover" />
  
        <div class="search-info">
          <h3>{{ track.trackName }}</h3>
          <p>{{ track.artistName }}</p>
        </div>
  
        <button class="play-btn" (click)="playTrack(track)">
          <img
            [src]="
              currentTrack === track && isPlaying
                ? 'assets/pause.png'
                : 'assets/play.png'
            "
            alt="Play/Pause"
          />
        </button>
      </div>
    </div>
  </div>

  <!-- üî• –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó (–≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –ª–∏—à–µ —è–∫—â–æ –Ω–µ–º–∞—î –ø–æ—à—É–∫—É) -->
  <ng-container *ngIf="!searchDone || searchResults.length === 0">
    <div class="genre-section" *ngIf="popularTracks.length > 0">
      <h2>üéß –ü–æ–ø—É–ª—è—Ä–Ω–µ</h2>
      <div class="results-grid">
        <div class="track-card" *ngFor="let track of popularTracks">
          <img [src]="track.artworkUrl100" alt="–û–±–∫–ª–∞–¥–∏–Ω–∫–∞" class="cover" />
          <h3>{{ track.trackName }}</h3>
          <p>{{ track.artistName }}</p>
          <button class="play-btn" (click)="playTrack(track)">
            <img
              [src]="
                currentTrack === track && isPlaying
                  ? 'assets/pause.png'
                  : 'assets/play.png'
              "
              alt="Play/Pause"
            />
          </button>
        </div>
      </div>
    </div>

    <div class="genre-section" *ngIf="rockTracks.length > 0">
      <h2>üé∏ –†–æ–∫</h2>
      <div class="results-grid">
        <div class="track-card" *ngFor="let track of rockTracks">
          <img [src]="track.artworkUrl100" alt="–û–±–∫–ª–∞–¥–∏–Ω–∫–∞" class="cover" />
          <h3>{{ track.trackName }}</h3>
          <p>{{ track.artistName }}</p>
          <button class="play-btn" (click)="playTrack(track)">
            <img
              [src]="
                currentTrack === track && isPlaying
                  ? 'assets/pause.png'
                  : 'assets/play.png'
              "
              alt="Play/Pause"
            />
          </button>
        </div>
      </div>
    </div>

    <div class="genre-section" *ngIf="popTracks.length > 0">
      <h2>üíÉ –ü–æ–ø</h2>
      <div class="results-grid">
        <div class="track-card" *ngFor="let track of popTracks">
          <img [src]="track.artworkUrl100" alt="–û–±–∫–ª–∞–¥–∏–Ω–∫–∞" class="cover" />
          <h3>{{ track.trackName }}</h3>
          <p>{{ track.artistName }}</p>
          <button class="play-btn" (click)="playTrack(track)">
            <img
              [src]="
                currentTrack === track && isPlaying
                  ? 'assets/pause.png'
                  : 'assets/play.png'
              "
              alt="Play/Pause"
            />
          </button>
        </div>
      </div>
    </div>
  </ng-container>

</div>
<!-- –ü–ª–µ—î—Ä -->
<div class="player-bar" *ngIf="currentTrack">
  <div class="player-info">
    <img [src]="currentTrack.artworkUrl100" alt="–û–±–∫–ª–∞–¥–∏–Ω–∫–∞" />
    <div>
      <h4>{{ currentTrack.trackName }}</h4>
      <p>{{ currentTrack.artistName }}</p>
    </div>
  </div>

  <audio
    id="audio-player"
    controls
    (ended)="onAudioEnded()"
    class="audio-element"
  ></audio>
</div>
